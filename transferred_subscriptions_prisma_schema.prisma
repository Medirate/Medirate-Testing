// Add this model to your existing prisma/schema.prisma file

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model transferred_subscriptions {
  id                     Int       @id @default(autoincrement())
  primary_user_email     String
  sub_user_email         String?   // Made nullable - only primary_user_email is mandatory
  subscription_start_date DateTime @db.Timestamptz(6)
  subscription_end_date  DateTime? @db.Timestamptz(6)
  transfer_date          DateTime  @default(now()) @db.Timestamptz(6)
  status                 String    @default("active") @db.VarChar(50)
  created_at             DateTime  @default(now()) @db.Timestamptz(6)
  updated_at             DateTime  @default(now()) @db.Timestamptz(6)

  @@unique([primary_user_email, sub_user_email], map: "transferred_subscriptions_primary_sub_unique")
  @@index([primary_user_email], map: "idx_transferred_subscriptions_primary_user")
  @@index([sub_user_email], map: "idx_transferred_subscriptions_sub_user")
  @@index([status], map: "idx_transferred_subscriptions_status")
  @@index([subscription_start_date, subscription_end_date], map: "idx_transferred_subscriptions_dates")
  @@map("transferred_subscriptions")
}
